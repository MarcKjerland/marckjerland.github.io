<!DOCTYPE html>
<html>
    <head>
        <title>Opposed dice roll outcomes</title>
        <script src="https://cdn.anychart.com/releases/8.0.0/js/anychart-base.min.js"></script>
        <script src="functions.js"></script>
    </head>
    <body>
        <div class="slidecontainer">
              <input type="range" min="1" max="100" value="12" class="slider" id="sliderRange">
              <p>Dicepool: <span id="demo1"></span></p>
        </div>
        <div id="dicepoolContainer" style="width: 100%; height: 100%"></div>
        <div class="slidecontainer">
              <input type="range" min="0" max="100" value="10" class="slider" id="opposedSliderRange">
              <p>Opposed dicepool: <span id="demo2"></span></p>
        </div>
        <div id="netHitsContainer" style="width: 100%; height: 100%"></div>
        <script>
            var slider1 = document.getElementById("sliderRange");
            var slider2 = document.getElementById("opposedSliderRange");
            var output1 = document.getElementById("demo1");
            var output2 = document.getElementById("demo2");
            output1.innerHTML = slider1.value; // Display the default slider value
            output2.innerHTML = slider2.value; // Display the default slider value
            var successRate = 1/3
            var maxNetHits = 10
            anychart.onDocumentReady(function() {
                
                // create the chart
                var chart = anychart.column();
                chart.id('outcomesHistogram');
                chart.title("Dice outcomes");
                // Add annotations
                chart.labels(true);
                chart.container("dicepoolContainer");
                // set the data
                ChartUpdate( chart, parseInt(slider1.value), successRate);

                // create another chart
                var chart2 = anychart.column();
                chart2.id('netHitsHistogram');
                chart2.title("Net success results");
                // Add annotations
                chart2.labels(true);
                chart2.container("netHitsContainer");
                // set the data
                NetHitsChartUpdate( chart2, parseInt(slider1.value), parseInt(slider2.value), successRate, maxNetHits );
                });

            // Update the current slider value (each time you drag the slider handle)
            slider1.oninput = function() {
                output1.innerHTML = this.value;
                var outcomesChart = anychart.getChartById('outcomesHistogram');
                var netHitsChart = anychart.getChartById('netHitsHistogram');
                ChartUpdate( outcomesChart, parseInt(this.value), successRate) 
                NetHitsChartUpdate( netHitsChart, parseInt(slider1.value), parseInt(slider2.value), successRate, maxNetHits ) 
                };
            slider2.oninput = function() {
                output2.innerHTML = this.value;
                var netHitsChart = anychart.getChartById('netHitsHistogram');
                NetHitsChartUpdate( netHitsChart, parseInt(slider1.value), parseInt(slider2.value), successRate, maxNetHits ) 
                };
        </script>
    </body>
</html>
