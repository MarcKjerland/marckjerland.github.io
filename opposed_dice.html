<!DOCTYPE html>
<html>
    <head>
        <title>Opposed dice roll outcomes</title>
        <script src="https://cdn.anychart.com/releases/8.0.0/js/anychart-base.min.js"></script>
        <script src="functions.js"></script>
    </head>
    <body>
	<p>Dicepool</p>
        <div id="playerList" class="playerList">
	    <ul class="player">
		<li><input id="dicepool" value="10" min="1" max="100" type="number" onclick="this.select()"></li>
	    </ul>
	</div>
        <div id="dicepoolContainer" style="width: 100%; height: 100%"></div>
	<p>Opposed dicepool</p>
        <div id="playerList" class="playerList">
	    <ul class="player">
		    <li><input id="opposedDicepool" value="10" min="0" max="100" type="number" onclick="this.select()"></li>
	    </ul>
	</div>
        <div id="netHitsContainer" style="width: 100%; height: 100%"></div>
        <script>
            slider1 = document.getElementById("dicepool");
            slider2 = document.getElementById("opposedDicepool");
            successRate = 1/3
            maxNetHits = 10
            anychart.onDocumentReady(function() {
                
                // create the chart
                chart = anychart.column();
                chart.id('outcomesHistogram');
                chart.title("Dice outcomes");
                // Add annotations
                chart.labels(true);
                chart.container("dicepoolContainer");
                // set the data
                ChartUpdate( chart, parseInt(slider1.value), successRate);

                // create another chart
                chart2 = anychart.column();
                chart2.id('netHitsHistogram');
                chart2.title("Net success results");
                // Add annotations
                chart2.labels(true);
                chart2.container("netHitsContainer");
                // set the data
                NetHitsChartUpdate( chart2, parseInt(slider1.value), parseInt(slider2.value), successRate, maxNetHits );
                });

            // Update the current slider value (each time you drag the slider handle)
            slider1.oninput = function() {
                outcomesChart = anychart.getChartById('outcomesHistogram');
                netHitsChart = anychart.getChartById('netHitsHistogram');
                ChartUpdate( outcomesChart, parseInt(this.value), successRate) 
                NetHitsChartUpdate( netHitsChart, parseInt(slider1.value), parseInt(slider2.value), successRate, maxNetHits ) 
                };
            slider2.oninput = function() {
                netHitsChart = anychart.getChartById('netHitsHistogram');
                NetHitsChartUpdate( netHitsChart, parseInt(slider1.value), parseInt(slider2.value), successRate, maxNetHits ) 
                };
        </script>
    </body>
</html>
